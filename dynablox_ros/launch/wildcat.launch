<?xml version="1.0" encoding="UTF-8"?>

<launch>
  <!-- Dataset -->
  <arg name="bag_file" default="/media/lukas/T7/Datasets/Wildcat_moving_objects/p21_2022-11-28-14-59-30_0.bag" />  <!-- . -->
  <arg name="player_rate" default="1" /> <!-- 0.5 -->
  <arg name="start_at" default="25" /> <!-- s -->
  
  <!-- Motion Detector -->
  <arg name="config_file" default="motion_detector/wildcat.yaml" />
  
  
  
  <!-- Run Nodes -->
  <param name="use_sim_time" value="true" />

  <!-- Play the bag -->
  <node name="player" pkg="rosbag" type="play" args="--quiet --clock --rate $(arg player_rate) $(arg bag_file) -d 1 -s $(arg start_at)" /> 

  <!-- Motion Detection -->
  <node name="motion_detector" pkg="dynablox_ros" type="motion_detector" output="screen" args="--alsologtostderr" required="true">
    <remap from="pointcloud" to="/velodyne_points" />
    <rosparam command="load" file="$(find dynablox_ros)/config/$(arg config_file)" />
    <param name="evaluate" value="false" />    
  </node>
  
  <!-- Visualize -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find dynablox_ros)/config/rviz/wildcat.rviz"/>

</launch>
